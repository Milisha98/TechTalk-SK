# üìÑ **Semantic Kernel Demo Application ‚Äî Requirements Specification**

## **1. Overview**
This project is a **recorded demonstration** of Microsoft Semantic Kernel (SK) showing how SK can orchestrate:

- Natural language intent understanding  
- Structured data retrieval  
- LINQ based filtering and aggregation  
- Insight generation via LLM  
- A chat style UI  

The demo uses **fake ERP style CSV data** and runs entirely **locally** at home with access to OpenAI.

The goal is to show what SK can do that GitHub Copilot and O365 Copilot cannot:  
**execute multi step reasoning pipelines that interact with structured data through plugins.**

---

# **2. Business Requirements**

## **2.1 Primary Business Goal**
Demonstrate that Semantic Kernel can:

- Understand natural language business questions  
- Retrieve and process structured financial data  
- Identify trends, anomalies, and risks  
- Produce meaningful insights  
- Orchestrate multiple steps automatically  

This must be shown in a way that is **clear, compelling, and relevant** to a corporate audience.

---

## **2.2 Core Demo Scenario (must be implemented)**

### **User Input**
> ‚ÄúDoes Acme Automotive have any outstanding balances? If so, summarise their last 6 months of payment behaviour and highlight anything unusual.‚Äù

### **Expected Output (example categories, not exact wording)**

- **Outstanding balance**  
  - ‚ÄúAcme Automotive currently has an outstanding balance of \$42,300 across 3 unpaid invoices.‚Äù

- **Payment timeliness**  
  - ‚ÄúThey consistently pay 30‚Äì45 days late.‚Äù

- **Anomalies**  
  - ‚ÄúTwo unusually large payments were made in October.‚Äù

- **Trend**  
  - ‚ÄúTheir outstanding balance has been trending upward over the last 3 months.‚Äù

The exact phrasing can vary, but **all four categories must be present**.

---

## **2.3 Additional Supported Questions**

The system must also handle:

1.  
   > ‚ÄúShow me the current outstanding balance and recent payment behaviour for Blue Horizon Logistics.‚Äù

2.  
   > ‚ÄúWhich customers have increasing outstanding balances over the last 3 months?‚Äù

3.  
   > ‚ÄúDoes any customer stand out as particularly risky based on late payments and growing balances?‚Äù

These must produce:

- Customer level summaries  
- Multi customer comparisons  
- Risk identification  
- Trend analysis  

---

## **2.4 Business Insight Requirements**

The system must be able to identify and describe:

- Outstanding balances  
- Late vs on time payments  
- Payment frequency  
- Payment gaps  
- Unusually large payments  
- Upward/downward trends in balances  
- Customers with increasing risk profiles  

These insights must be generated by the LLM based on structured data passed to it.

---

# **3. Technical Requirements**

## **3.1 Tech Stack**

### **Languages & Frameworks**
- **C# (.NET 8 or later)**  
- **Semantic Kernel** (latest stable)  
- **Gradio.NET** (for chat UI)  
- **LINQ** (for data filtering and aggregation)
- **DotEnv.Net** (for secrets. The .env file must be in .gitignore)

### **Data**
- **CSV files** (no database)  
- Loaded into memory as strongly typed objects  

### **LLM Provider**
- **OpenAI** (GPT 4o or GPT 5.2)  
- Used for:
  - Natural language ‚Üí filter spec  
  - Insight generation  

All frameworks should be the latest version (as of 1 January 2026).

---

## **3.2 Data Files**

### **customers.csv**
```
CustomerID,Name,ABN,Region
```

### **invoices.csv**
```
InvoiceID,CustomerID,Amount,DueDate,PaidDate
```

### **payments.csv**
```
PaymentID,CustomerID,Amount,Date
```

### **Data Requirements**
- 8‚Äì12 fake customers  
- 30‚Äì60 invoices  
- 30‚Äì60 payments  
- Include:
  - Late payments  
  - Unpaid invoices  
  - Irregular payment patterns  
  - At least one customer with:
    - Two unusually large payments in one month  
    - Upward balance trend  

---

## **3.3 Semantic Kernel Components**

### **3.3.1 Semantic Function: NL ‚Üí FilterSpec**
Input:
- User question  
- Schema description  

Output:
- JSON filter specification, e.g.:

```json
{
  "customerName": "Acme Automotive",
  "months": 6,
  "includeOutstanding": true,
  "includeTrends": true,
  "includeAnomalies": true,
  "scope": "singleCustomer"
}
```

### **3.3.2 Semantic Function: Results ‚Üí Insight**
Input:
- FilterResult with raw invoice and payment data (JSON)
- Customer information and outstanding balance (basic aggregation)

Output:
- Natural language summary where **LLM analyzes the raw data** to identify:
  - Outstanding balance (provided)  
  - Payment behaviour patterns (LLM analyzes timeliness)
  - Anomalies (LLM detects unusual amounts, timing, gaps)  
  - Trends (LLM identifies increasing/decreasing balances, behavior changes)  
  - Risks (LLM assesses based on patterns)

---

## **3.4 Plugin: ErpDataPlugin**

### **Responsibilities**
- Load CSV files into memory  
- Apply LINQ filters based on FilterSpec  
- Fetch customer by name
- Fetch invoices for specified time period (last N months)
- Fetch payments for specified time period
- Compute basic aggregations:
  - Outstanding balance (sum of unpaid invoices)
  - DaysLate for each invoice (DueDate vs PaidDate)
- **No complex analysis** - plugin only fetches and prepares data
- Return raw data for LLM to analyze

### **Methods**
```csharp
Task LoadDataAsync();
Task<FilterResult> ApplyFilterAsync(FilterSpec spec);
```

`FilterResult` includes:

- Customer info (ID, Name, Region)  
- Outstanding balance (basic aggregation)  
- List of InvoiceInfo (with calculated DaysLate)  
- List of PaymentInfo  
- **LLM analyzes this raw data** to find anomalies, trends, and risks

---

## **3.5 Orchestration Logic**

Implement:

```csharp
Task<string> ProcessUserMessage(string userMessage)
```

Steps:

1. Call NL ‚Üí FilterSpec semantic function  
2. Parse JSON into `FilterSpec`  
3. Call `ErpDataPlugin.ApplyFilterAsync(spec)`  
4. Serialize `FilterResult`  
5. Pass to Results ‚Üí Insight semantic function  
6. Return final answer  

This is the method the UI will call.

---

## **3.6 User Interface (Gradio.NET)**

### **Requirements**
- Web based chat UI  
- Chat history  
- Text input box  
- Each user message triggers `ProcessUserMessage`  
- Display assistant responses in chat bubbles  

### **Optional Enhancements**
- Show intermediate filter spec  
- Show raw metrics in a collapsible panel  

---

# **4. Non Functional Requirements**

- Must run entirely locally  
- Only external dependency is OpenAI  
- Code must be clean and readable  
- Demo must be stable and deterministic enough for recording  
- Handle invalid input gracefully  
- Provide clear error messages  

---

# **5. Deliverables**

1. Full C# solution  
2. CSV data files  
3. Semantic Kernel setup  
4. ErpDataPlugin implementation  
5. Semantic prompts  
6. Gradio.NET chat UI  
7. README with:
   - Setup instructions  
   - How to run  
   - Example questions  

---
