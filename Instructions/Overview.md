# üìÑ **Semantic Kernel Demo Application ‚Äî Requirements Specification**

## **1. Overview**
This project is a **recorded demonstration** of Microsoft Semantic Kernel (SK) showing how SK can orchestrate:

- Natural language intent understanding  
- Structured data retrieval  
- LINQ based filtering and aggregation  
- Insight generation via LLM  
- A chat style UI  

The demo uses **fake ERP style CSV data** and runs entirely **locally** at home with access to OpenAI.

The goal is to show what SK can do that GitHub Copilot and O365 Copilot cannot:  
**execute multi step reasoning pipelines that interact with structured data through plugins.**

---

# **2. Business Requirements**

## **2.1 Primary Business Goal**
Demonstrate that Semantic Kernel can:

- Understand natural language business questions  
- Retrieve and process structured financial data  
- Identify trends, anomalies, and risks  
- Produce meaningful insights  
- Orchestrate multiple steps automatically  

This must be shown in a way that is **clear, compelling, and relevant** to a corporate audience.

---

## **2.2 Core Demo Scenario (must be implemented)**

### **User Input**
> ‚ÄúDoes Acme Automotive have any outstanding balances? If so, summarise their last 6 months of payment behaviour and highlight anything unusual.‚Äù

### **Expected Output (example categories, not exact wording)**

- **Outstanding balance**  
  - ‚ÄúAcme Automotive currently has an outstanding balance of \$42,300 across 3 unpaid invoices.‚Äù

- **Payment timeliness**  
  - ‚ÄúThey consistently pay 30‚Äì45 days late.‚Äù

- **Anomalies**  
  - ‚ÄúTwo unusually large payments were made in October.‚Äù

- **Trend**  
  - ‚ÄúTheir outstanding balance has been trending upward over the last 3 months.‚Äù

The exact phrasing can vary, but **all four categories must be present**.

---

## **2.3 Additional Supported Questions**

The system must also handle:

1.  
   > ‚ÄúShow me the current outstanding balance and recent payment behaviour for Blue Horizon Logistics.‚Äù

2.  
   > ‚ÄúWhich customers have increasing outstanding balances over the last 3 months?‚Äù

3.  
   > ‚ÄúDoes any customer stand out as particularly risky based on late payments and growing balances?‚Äù

These must produce:

- Customer level summaries  
- Multi customer comparisons  
- Risk identification  
- Trend analysis  

---

## **2.4 Business Insight Requirements**

The system must be able to identify and describe:

- Outstanding balances  
- Late vs on time payments  
- Payment frequency  
- Payment gaps  
- Unusually large payments  
- Upward/downward trends in balances  
- Customers with increasing risk profiles  

These insights must be generated by the LLM based on structured data passed to it.

---

# **3. Technical Requirements**

## **3.1 Tech Stack**

### **Languages & Frameworks**
- **C# (.NET 8 or later)**  
- **Semantic Kernel** (latest stable)  
- **Gradio.NET** (for chat UI)  
- **LINQ** (for data filtering and aggregation)
- **DotEnv.Net** (for secrets. The .env file must be in .gitignore)

### **Data**
- **CSV files** (no database)  
- Loaded into memory as strongly typed objects  

### **LLM Provider**
- **OpenAI** (GPT 4o or GPT 5.2)  
- Used for:
  - Automatic function calling to retrieve data  
  - Analyzing raw data to generate insights

All frameworks should be the latest version (as of 1 January 2026).

---

## **3.2 Data Files**

### **customers.csv**
```
CustomerID,Name,ABN,Region
```

### **invoices.csv**
```
InvoiceID,CustomerID,Amount,DueDate,PaidDate
```

### **payments.csv**
```
PaymentID,CustomerID,Amount,Date
```

### **Data Requirements**
- 8‚Äì12 fake customers  
- 30‚Äì60 invoices  
- 30‚Äì60 payments  
- Include:
  - Late payments  
  - Unpaid invoices  
  - Irregular payment patterns  
  - At least one customer with:
    - Two unusually large payments in one month  
    - Upward balance trend  

---

## **3.3 Semantic Kernel Components**

### **3.3.1 Automatic Function Calling**
Semantic Kernel uses **automatic function calling** where the LLM:
- Receives the user's natural language question
- **Autonomously decides** which plugin functions to call
- Calls functions as needed (can call multiple functions)
- Analyzes the returned data
- Generates natural language insights

**No manual orchestration** - SK handles this automatically.

### **3.3.2 System Prompt**
A system prompt instructs the LLM on its role:
- Act as a financial analyst
- Use available functions to retrieve customer data
- Analyze payment patterns, anomalies, and trends
- Provide actionable business insights

---

## **3.4 Plugin: ErpDataPlugin**

### **Responsibilities**
- Load CSV files into memory  
- Expose **granular, discoverable functions** that LLM can call
- Each function does one thing (single responsibility)
- LLM decides which functions to call based on user question

### **KernelFunction Methods**
The plugin exposes these functions for the LLM to call:

```csharp
// Customer lookup
Customer? GetCustomerByName(string customerName);

// Data retrieval
List<Invoice> GetInvoicesForCustomer(string customerName, int months);
List<Payment> GetPaymentsForCustomer(string customerName, int months);

// Basic calculations
decimal CalculateOutstandingBalance(string customerName);
```

Each function:
- Has a clear description for the LLM
- Takes simple parameters
- Returns structured data
- **LLM calls these autonomously** based on what it needs

---

## **3.5 Chat Completion with Auto Function Calling**

Implement:

```csharp
Task<string> ProcessUserMessageAsync(string userMessage)
```

Steps:

1. Add user message to chat history
2. Call chat completion with `FunctionChoiceBehavior.Auto()`
3. **SK automatically:**
   - Determines which plugin functions to call
   - Invokes them with appropriate parameters
   - Passes results back to LLM
   - LLM analyzes and generates response
4. Return LLM's natural language answer

**No manual orchestration** - this is SK's core capability!

---

## **3.6 User Interface (Gradio.NET)**

### **Requirements**
- Web based chat UI  
- Chat history  
- Text input box  
- Each user message triggers `ProcessUserMessage`  
- Display assistant responses in chat bubbles  

### **Optional Enhancements**
- Show which functions the LLM called (for transparency)
- Display raw data in a collapsible panel

---

# **4. Non Functional Requirements**

- Must run entirely locally  
- Only external dependency is OpenAI  
- Code must be clean and readable  
- Demo must be stable and deterministic enough for recording  
- Handle invalid input gracefully  
- Provide clear error messages  

---

# **5. Deliverables**

1. Full C# solution  
2. CSV data files  
3. Semantic Kernel setup  
4. ErpDataPlugin implementation  
5. Semantic prompts  
6. Gradio.NET chat UI  
7. README with:
   - Setup instructions  
   - How to run  
   - Example questions  

---
